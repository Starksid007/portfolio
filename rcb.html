<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCB 2025</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        let roleIcons = {
            'Batsman': 'üèè',
            'Bowler': '‚öæ',
            'Wicketkeeper': 'üß§',
            'All-rounder': 'üèè‚öæ',
            'Wicketkeeper-Batsman': 'üß§üèè',
            'Captain': 'C üèè'
        };

        let squad = [
            { name: 'Virat Kohli', role: 'Batsman' },
            { name: 'Phil Salt', role: 'Wicketkeeper-Batsman' },
            { name: 'Jitesh Sharma', role: 'Wicketkeeper-Batsman' },
            { name: 'Rajat Patidar', role: 'Captain' },
            { name: 'Devdutt Padikkal', role: 'Batsman' },
            { name: 'Swastik Chhikara', role: 'Batsman' },
            { name: 'Liam Livingstone', role: 'All-rounder' },
            { name: 'Krunal Pandya', role: 'All-rounder' },
            { name: 'Swapnil Singh', role: 'All-rounder' },
            { name: 'Tim David', role: 'All-rounder' },
            { name: 'Romario Shepherd', role: 'All-rounder' },
            { name: 'Manoj Bhandage', role: 'All-rounder' },
            { name: 'Jacob Bethell', role: 'All-rounder' },
            { name: 'Josh Hazelwood', role: 'Bowler' },
            { name: 'Rasikh Dar', role: 'Bowler' },
            { name: 'Suyash Sharma', role: 'Bowler' },
            { name: 'Bhuvneshwar Kumar', role: 'Bowler' },
            { name: 'Nuwan Thushara', role: 'Bowler' },
            { name: 'Lungi Ngidi', role: 'Bowler' },
            { name: 'Abhinandan Singh', role: 'Bowler' },
            { name: 'Mohit Rathee', role: 'Bowler' },
            { name: 'Yash Dayal', role: 'Bowler' }
        ];

        let playing11 = JSON.parse(localStorage.getItem("playing11")) || [];
        let impactPlayer = JSON.parse(localStorage.getItem("impactPlayer")) || null;
        let secondInningTeam = [...playing11];


        function selectPlayer(playerName, playerRole) {
            let checkbox = document.querySelector(`input[value="${playerName}"]`);
            if (checkbox.checked) {
                if (playing11.length < 11) {
                    playing11.push({ name: playerName, role: playerRole });
                } else {
                    checkbox.checked = false;
                    alert("You can only select 11 players.");
                }
            } else {
                playing11 = playing11.filter(player => player.name !== playerName);
            }
            updatePlayerCount();
        }

        function updatePlayerCount() {
            document.getElementById("player-count").innerText = `Selected: ${playing11.length}/11`;
        }

        function saveSquad() {
            if (playing11.length !== 11) {
                alert("You must select exactly 11 players.");
                return;
            }
            localStorage.setItem("playing11", JSON.stringify(playing11));
            secondInningTeam = [...playing11];
            updatePlaying11();
            updateSecondInnings();
        }

function updatePlaying11() {
    document.getElementById("playing11-list").innerHTML = playing11.map((player, index) => 
        `<li onclick="replaceWithImpact('${player.name}', '${player.role}')">
            <strong>${index + 1}. ${player.name}</strong>
            <span class="role-icon">${roleIcons[player.role] || ''}</span>
        </li>`
    ).join('');
    updateSecondInnings();
    updateImpactDropdown();
}

function updateSecondInnings() {
    document.getElementById("second-inning-list").innerHTML = secondInningTeam.map((player, index) => 
        `<li>
            <strong>${index + 1}. ${player.name}</strong>
            <span class="role-icon">${roleIcons[player.role] || ''}</span>
        </li>`
    ).join('');
}

function updateSquadSelection() {
    document.getElementById("squad-list").innerHTML = squad.map(player => 
        `<li>
            <input type="checkbox" class="player-checkbox" value="${player.name}" 
                ${playing11.some(p => p.name === player.name) ? 'checked' : ''} 
                onchange="selectPlayer('${player.name}', '${player.role}')">
            <strong>${player.name}</strong>
            <span class="role-icon">${roleIcons[player.role] || ''}</span>
        </li>`
    ).join('');
    updatePlayerCount();
}

        function updateImpactDropdown() {
            let impactDropdown = document.getElementById("impact-select");
            impactDropdown.innerHTML = squad.map(player =>
                `<option value="${player.name}" ${impactPlayer && impactPlayer.name === player.name ? 'selected' : ''}>
                    ${player.name} (${player.role})
                </option>`
            ).join('');
            if (!impactPlayer && squad.length > 0) {
                impactPlayer = squad[0];
                localStorage.setItem("impactPlayer", JSON.stringify(impactPlayer));
            }
            if (impactPlayer) {
                document.getElementById("impact-name").innerText = impactPlayer.name;
                document.getElementById("impact-role").innerText = roleIcons[impactPlayer.role] || '';
            }
        }

        function updateImpactPlayer() {
            let selectedValue = document.getElementById("impact-select").value;
            let selectedPlayer = squad.find(player => player.name === selectedValue);
            if (selectedPlayer) {
                impactPlayer = { name: selectedPlayer.name, role: selectedPlayer.role };
                localStorage.setItem("impactPlayer", JSON.stringify(impactPlayer));
                document.getElementById("impact-name").innerText = impactPlayer.name;
                document.getElementById("impact-role").innerText = roleIcons[impactPlayer.role] || '';
            }
        }

        function replaceWithImpact(playerName) {
            if (impactPlayer) {
                secondInningTeam = secondInningTeam.filter(player => player.name !== playerName);
                secondInningTeam.push(impactPlayer);
                updateSecondInnings();
            }
        }

        function toggleSquad() {
            let squadContainer = document.getElementById("squad-container");
            squadContainer.style.display = (squadContainer.style.display === "none") ? "block" : "none";
        }

        window.onload = function() {
            updateSquadSelection();
            updatePlaying11();
            updateImpactDropdown();
            updateSecondInnings();
        };
    </script>
</head>
<body>
    <h1>Royal Challengers Bangalore 2025</h1>
    <p class="instructions">Select exactly 11 players and save your squad.</p>

    <button onclick="toggleSquad()">Show/Hide Squad</button>

    <div class="container" id="squad-container" style="display: none;">
        <div class="team-section">
            <h2>Squad</h2>
            <ul class="team-list" id="squad-list"></ul>
            <p id="player-count">Selected: 0/11</p>
            <button onclick="saveSquad()">Save Squad</button>
        </div>
    </div>

    <div class="container">
        <div class="impact-selection">
            <h3>Select Impact Player</h3>
            <select id="impact-select" onchange="updateImpactPlayer()"></select>
        </div>

        <div class="impact-player">
            <p><strong id="impact-name">None</strong></p>
            <p id="impact-role"></p>
        </div>
    </div>

    <div class="container">
        <div class="team-section">
            <h2>1st Inning: Bat</h2>
            <ul class="team-list" id="playing11-list"></ul>
        </div>

        <div class="team-section">
            <h2>2nd Inning: Bowl</h2>
            <ul class="team-list" id="second-inning-list"></ul>
        </div>
    </div>
</body>
</html>
